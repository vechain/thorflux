{"version":3,"file":"module.js","mappings":"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","sources":["webpack://vechain-heatmap-panel/external amd \"@emotion/css\"","webpack://vechain-heatmap-panel/external amd \"@grafana/data\"","webpack://vechain-heatmap-panel/external amd \"@grafana/ui\"","webpack://vechain-heatmap-panel/external amd \"module\"","webpack://vechain-heatmap-panel/external amd \"react\"","webpack://vechain-heatmap-panel/webpack/bootstrap","webpack://vechain-heatmap-panel/webpack/runtime/compat get default export","webpack://vechain-heatmap-panel/webpack/runtime/define property getters","webpack://vechain-heatmap-panel/webpack/runtime/hasOwnProperty shorthand","webpack://vechain-heatmap-panel/webpack/runtime/make namespace object","webpack://vechain-heatmap-panel/webpack/runtime/publicPath","webpack://vechain-heatmap-panel/./node_modules/grafana-public-path.js","webpack://vechain-heatmap-panel/./components/SimplePanel.tsx","webpack://vechain-heatmap-panel/./module.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"public/plugins/vechain-heatmap-panel/\";","\nimport amdMetaModule from 'amd-module';\n\n__webpack_public_path__ =\n  amdMetaModule && amdMetaModule.uri\n    ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n    : 'public/plugins/vechain-heatmap-panel/';\n","import React from 'react';\nimport { PanelProps } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\nexport const EpochBlocksPanel: React.FC<PanelProps> = ({ data, width, height }) => {\n  const theme = useTheme2();\n\n  const processData = () => {\n    if (!data.series.length || !data.series[0].fields.length) {\n      return [];\n    }\n\n    const epochField = data.series[0].fields.find(f => f.name === 'epoch');\n    const valueField = data.series[0].fields.find(f => f.name === '_value');\n\n    if (!epochField || !valueField) {\n      return [];\n    }\n\n    const epochData: { [key: number]: number[] } = {};\n    for (let i = 0; i < epochField.values.length; i++) {\n      const epoch = epochField.values[i];\n      const value = valueField.values[i];\n\n      if (!epochData[epoch]) {\n        epochData[epoch] = [];\n      }\n\n      epochData[epoch].push(value);\n    }\n\n    const epochs = Object.entries(epochData)\n      .map(([epoch, values]) => ({\n        epoch: parseInt(epoch),\n        values\n      }))\n      .sort((a, b) => a.epoch - b.epoch);\n\n    return epochs.map((epochData, index) => {\n      const isFirstEpoch = index === 0;\n      const isOnlyEpoch = epochs.length === 1;\n\n      if (isFirstEpoch && !isOnlyEpoch) {\n        return {\n          epoch: epochData.epoch,\n          values: epochData.values\n        };\n      } else {\n        const filledValues = [...epochData.values];\n        while (filledValues.length < 180) {\n          filledValues.push(-1); // -1 represents pending\n        }\n        return {\n          epoch: epochData.epoch,\n          values: filledValues\n        };\n      }\n    });\n  };\n\n  const epochs = processData();\n\n  const getBlockNumber = (epoch: number, blockIndex: number) => {\n    return (epoch * 180) + blockIndex;\n  };\n\n  // Function to interpolate between colors based on percentage\n  const interpolateColor = (percent: number): string => {\n    if (percent === -1) return theme.colors.secondary.main; // Pending block\n\n    // Convert percentage to ensure 0 is green and 100 is red\n    const normalizedPercent = percent / 100;\n\n    // RGB values for green (0%) and red (100%)\n    const green = { r: 50, g: 205, b: 50 }; // Lighter green\n    const red = { r: 220, g: 20, b: 60 }; // Crimson red\n\n    // Interpolate between the colors\n    const r = Math.round(green.r + (red.r - green.r) * normalizedPercent);\n    const g = Math.round(green.g + (red.g - green.g) * normalizedPercent);\n    const b = Math.round(green.b + (red.b - green.b) * normalizedPercent);\n\n    return `rgb(${r}, ${g}, ${b})`;\n  };\n\n  const BLOCK_SIZE = 16;\n  const BLOCK_GAP = 2;\n  const BLOCKS_PER_MARKER = 12;\n  const HEADER_BOTTOM_MARGIN = 24;\n  const EPOCH_NUMBER_WIDTH = 60;\n  const EPOCH_NUMBER_MARGIN = 8;\n\n  const styles = {\n    container: css`\n      padding: ${theme.spacing(1)};\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n      position: relative;\n      isolation: isolate;\n    `,\n    row: css`\n      display: flex;\n      align-items: center;\n      margin-bottom: ${theme.spacing(0.5)};\n      position: relative;\n    `,\n    epochNumber: css`\n      width: ${EPOCH_NUMBER_WIDTH}px;\n      margin-right: ${EPOCH_NUMBER_MARGIN}px;\n      font-size: ${theme.typography.size.sm};\n    `,\n    blocksContainer: css`\n      display: flex;\n      flex-wrap: wrap;\n      gap: ${BLOCK_GAP}px;\n      position: relative;\n    `,\n    block: css`\n      width: ${BLOCK_SIZE}px;\n      height: ${BLOCK_SIZE}px;\n      border-radius: 2px;\n      cursor: pointer;\n      transition: opacity 0.2s;\n      position: relative;\n      &:hover {\n        opacity: 0.8;\n      }\n    `,\n    tooltip: css`\n      position: absolute;\n      background: ${theme.colors.background.secondary};\n      padding: ${theme.spacing(0.5)} ${theme.spacing(1)};\n      border-radius: ${theme.shape.radius.default};\n      font-size: ${theme.typography.size.xs};\n      z-index: 9999;\n      transform: translate(-50%, 0);\n      white-space: nowrap;\n      pointer-events: none;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n      top: 100%;\n      margin-top: 1px;\n    `,\n    headerContainer: css`\n      margin-bottom: ${HEADER_BOTTOM_MARGIN}px;\n      position: relative;\n      height: 20px;\n      z-index: 1;\n    `,\n    headerContent: css`\n      position: relative;\n      margin-left: ${EPOCH_NUMBER_WIDTH + EPOCH_NUMBER_MARGIN}px;\n    `,\n    headerMarker: css`\n      position: absolute;\n      text-align: center;\n      transform: translateX(-50%);\n      color: ${theme.colors.text.secondary};\n      font-size: ${theme.typography.size.sm};\n    `\n  };\n\n  const [tooltip, setTooltip] = React.useState<{\n    visible: boolean;\n    text: string;\n    style: React.CSSProperties;\n  }>({\n    visible: false,\n    text: '',\n    style: {},\n  });\n\n  const handleBlockHover = (\n    event: React.MouseEvent,\n    epoch: number,\n    blockIndex: number,\n    value: number\n  ) => {\n    const element = event.currentTarget;\n    const rect = element.getBoundingClientRect();\n    const containerRect = element.closest(`.${styles.container}`)?.getBoundingClientRect();\n\n    if (!containerRect) return;\n\n    let status: string;\n    if (value === -1) {\n      status = 'pending';\n    } else {\n      status = `${value}%`;\n    }\n\n    const blockNumber = getBlockNumber(epoch, blockIndex);\n\n    const left = rect.left - containerRect.left + rect.width / 2;\n    const top = rect.top - containerRect.top + rect.height;\n\n    setTooltip({\n      visible: true,\n      text: `Block ${blockNumber}: ${status}`,\n      style: {\n        left: `${left}px`,\n        top: `${top}px`,\n      },\n    });\n  };\n\n  const getMarkerPosition = (blockIndex: number) => {\n    const blockTotalWidth = BLOCK_SIZE + BLOCK_GAP;\n    return blockIndex * blockTotalWidth + (BLOCK_SIZE / 2);\n  };\n\n  const markers = Array.from({ length: Math.ceil(180 / BLOCKS_PER_MARKER) }, (_, i) => {\n    const blockIndex = i * BLOCKS_PER_MARKER;\n    return {\n      blockIndex,\n      position: getMarkerPosition(blockIndex)\n    };\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.headerContainer}>\n        <div className={styles.headerContent}>\n          {markers.map(({ blockIndex, position }) => (\n            <div\n              key={blockIndex}\n              className={styles.headerMarker}\n              style={{ left: position }}\n            >\n              {blockIndex}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {epochs.map(({ epoch, values }) => (\n        <div key={epoch} className={styles.row}>\n          <div className={styles.epochNumber}>{epoch}</div>\n          <div className={styles.blocksContainer}>\n            {values.map((value, index) => (\n              <div\n                key={index}\n                className={styles.block}\n                style={{\n                  backgroundColor: interpolateColor(value),\n                  opacity: value === -1 ? 0.3 : 1,\n                }}\n                onMouseEnter={(e) => handleBlockHover(e, epoch, index, value)}\n                onMouseLeave={() => setTooltip(prev => ({ ...prev, visible: false }))}\n              />\n            ))}\n          </div>\n        </div>\n      ))}\n\n      {tooltip.visible && (\n        <div\n          className={styles.tooltip}\n          style={tooltip.style}\n        >\n          {tooltip.text}\n        </div>\n      )}\n    </div>\n  );\n};","import { PanelPlugin } from '@grafana/data';\nimport { SimpleOptions } from './types';\nimport { EpochBlocksPanel } from './components/SimplePanel';\n\nexport const plugin = new PanelPlugin<SimpleOptions>(EpochBlocksPanel).setPanelOptions((builder) => {\n  return builder;\n});\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__89__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__308__","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","p","slice","lastIndexOf","plugin","PanelPlugin","data","width","height","theme","useTheme2","epochs","series","length","fields","epochField","find","f","name","valueField","epochData","i","values","epoch","push","entries","map","parseInt","sort","b","index","isFirstEpoch","isOnlyEpoch","filledValues","processData","interpolateColor","percent","colors","secondary","main","normalizedPercent","green","red","Math","round","styles","container","css","spacing","row","epochNumber","typography","size","sm","blocksContainer","block","tooltip","background","shape","radius","default","xs","headerContainer","headerContent","EPOCH_NUMBER_WIDTH","headerMarker","text","setTooltip","React","visible","style","getMarkerPosition","blockIndex","BLOCK_SIZE","markers","Array","from","ceil","_","position","div","className","left","backgroundColor","opacity","onMouseEnter","e","event","element","currentTarget","rect","getBoundingClientRect","containerRect","closest","status","blockNumber","getBlockNumber","top","handleBlockHover","onMouseLeave","prev","setPanelOptions","builder"],"sourceRoot":""}