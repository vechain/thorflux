FROM node:18-alpine as plugin-builder

# Install dependencies
RUN apk add --no-cache git

# Set working directory
WORKDIR /plugins

# Copy plugin directories
COPY plugins/vechain-heatmap-panel /plugins/vechain-heatmap-panel
COPY plugins/vechain-slotmap-panel /plugins/vechain-slotmap-panel

# Build heatmap plugin
WORKDIR /plugins/vechain-heatmap-panel
RUN npm install && npm run build

# Build slotmap plugin
WORKDIR /plugins/vechain-slotmap-panel
RUN npm install && npm run build

